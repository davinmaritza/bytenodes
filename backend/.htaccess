RewriteEngine On

# Remove /api prefix if present (for clean URLs)
RewriteRule ^api/(.*)$ $1 [L,QSA]

# Auth endpoints
RewriteRule ^auth/register$ auth/register.php [L,QSA]
RewriteRule ^auth/login$ auth/login.php [L,QSA]
RewriteRule ^auth/me$ auth/me.php [L,QSA]

# Products and services
RewriteRule ^products$ products/index.php [L,QSA]
RewriteRule ^services$ services/index.php [L,QSA]
RewriteRule ^orders$ orders/create.php [L,QSA]

# Tickets
RewriteRule ^tickets$ tickets/index.php [L,QSA]
RewriteRule ^tickets/([0-9]+)/replies$ tickets/replies.php [L,QSA]

# Payments
RewriteRule ^payments/create-intent$ payments/create-intent.php [L,QSA]
RewriteRule ^invoices$ invoices/index.php [L,QSA]

# Blog
RewriteRule ^blog/posts$ blog/posts.php [L,QSA]
RewriteRule ^blog/posts/([0-9]+)$ blog/posts.php [L,QSA]

# Admin
RewriteRule ^admin/tickets$ admin/tickets.php [L,QSA]
RewriteRule ^admin/orders$ admin/orders.php [L,QSA]
RewriteRule ^admin/blog/posts$ admin/blog.php [L,QSA]
RewriteRule ^admin/blog/posts/([0-9]+)$ admin/blog.php [L,QSA]
